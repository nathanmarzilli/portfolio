<!DOCTYPE html>
<html lang="fr" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Pr√©paration RDV Projet | Nathan Marzilli</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Space+Grotesk:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: { sans: ['Inter', 'sans-serif'], display: ['Space Grotesk', 'sans-serif'] },
                    colors: {
                        dark: { 950: '#020617', 900: '#0B1120', 800: '#1E293B' },
                        accent: { 400: '#2DD4BF', 500: '#14B8A6' }
                    },
                    animation: {
                        blob: "blob 7s infinite",
                    },
                    keyframes: {
                        blob: {
                            "0%": { transform: "translate(0px, 0px) scale(1)" },
                            "33%": { transform: "translate(30px, -50px) scale(1.1)" },
                            "66%": { transform: "translate(-20px, 20px) scale(0.9)" },
                            "100%": { transform: "translate(0px, 0px) scale(1)" },
                        },
                    },
                }
            }
        }
    </script>

    <style>
        /* --- UI APPLICATION (MODE SOMBRE) --- */
        body { background-color: #020617; color: #E2E8F0; overflow-x: hidden; }
        
        /* Background Blobs */
        .animate-blob { animation: blob 7s infinite; }
        .animation-delay-2000 { animation-delay: 2s; }
        .animation-delay-4000 { animation-delay: 4s; }

        /* Glass Cards */
        .glass-card {
            background: rgba(30, 41, 59, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(12px);
            border-radius: 1.5rem;
        }

        /* Inputs Styling */
        .input-premium, .textarea-premium, .select-premium {
            background: rgba(15, 23, 42, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
            border-radius: 0.75rem;
            padding: 0.75rem 1rem;
            width: 100%;
            transition: all 0.3s ease;
            font-size: 0.95rem;
            font-family: 'Inter', sans-serif;
        }
        .input-premium:focus, .textarea-premium:focus, .select-premium:focus {
            border-color: #2DD4BF;
            outline: none;
            box-shadow: 0 0 0 2px rgba(45, 212, 191, 0.1);
            background: rgba(15, 23, 42, 0.8);
        }
        
        /* Labels */
        .label-premium {
            display: block;
            font-size: 0.75rem;
            font-weight: 600;
            color: #94A3B8;
            margin-bottom: 0.35rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        /* Section Titles */
        .section-title {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.1rem;
            font-weight: 700;
            color: white;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            padding-bottom: 0.5rem;
            margin-top: 2rem;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .section-title i { color: #2DD4BF; }
        
        /* Ajustement marge titre section documents */
        #documents-section-title { margin-top: 0; }

        /* Checkboxes */
        .chk-label {
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            padding: 0.75rem;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: background 0.2s;
            border: 1px solid transparent;
        }
        .chk-label:hover { background: rgba(255,255,255,0.03); border-color: rgba(255,255,255,0.05); }
        .chk-input {
            accent-color: #2DD4BF;
            width: 1.1rem;
            height: 1.1rem;
            margin-top: 2px;
        }

        /* Styles pour les boutons Packs */
        .pack-radio-label {
            transition: all 0.3s ease;
            cursor: pointer;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        .pack-radio-label:hover {
            background: rgba(255,255,255,0.05);
        }
        /* Essentiel & Vitrine (Bleu Ciel / Cyan) */
        input[value="Essentiel"]:checked + label,
        input[value="Vitrine"]:checked + label {
            background: rgba(45, 212, 191, 0.15);
            color: #2DD4BF;
            border-color: #2DD4BF;
            font-weight: 700;
            box-shadow: 0 0 15px rgba(45, 212, 191, 0.1);
        }
        /* Premium (Violet) */
        input[value="Premium"]:checked + label {
            background: rgba(139, 92, 246, 0.15);
            color: #A78BFA;
            border-color: #8B5CF6;
            font-weight: 700;
            box-shadow: 0 0 15px rgba(139, 92, 246, 0.1);
        }

        /* Floating Action Bar */
        .sticky-action-bar {
            position: fixed;
            bottom: 0; left: 0; right: 0;
            padding: 1.5rem;
            background: rgba(2, 6, 23, 0.90);
            backdrop-filter: blur(10px);
            border-top: 1px solid rgba(255,255,255,0.1);
            z-index: 50;
            display: flex;
            justify-content: center;
            gap: 1rem;
        }

        /* Animations */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .fade-in { animation: fadeIn 0.5s ease-out forwards; }
    </style>    
</head>
<body class="selection:bg-accent-400/30 selection:text-white pb-32">

    <div class="fixed top-0 left-0 w-full h-full overflow-hidden pointer-events-none -z-10">
        <div class="absolute top-[-10%] left-[-10%] w-[500px] h-[500px] bg-blue-600/20 rounded-full blur-[100px] mix-blend-screen animate-blob"></div>
        <div class="absolute top-[20%] right-[-10%] w-[400px] h-[400px] bg-accent-400/10 rounded-full blur-[100px] mix-blend-screen animate-blob animation-delay-2000"></div>
        <div class="absolute bottom-[-10%] left-[20%] w-[600px] h-[600px] bg-indigo-500/10 rounded-full blur-[100px] mix-blend-screen animate-blob animation-delay-4000"></div>
    </div>

    <nav class="w-full border-b border-white/5 bg-dark-950/50 backdrop-blur-md sticky top-0 z-40">
        <div class="max-w-4xl mx-auto px-4 h-16 flex items-center justify-between">
            <div class="flex items-center gap-3">
                <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-accent-400 to-blue-600 flex items-center justify-center text-dark-950 font-bold">
                    <i class="ph-bold ph-rocket-launch"></i>
                </div>
                <span class="font-display font-bold text-lg tracking-wide text-white">Project<span class="text-accent-400">Kickoff</span></span>
            </div>
            <a href="../index.html" class="text-xs font-bold text-slate-400 hover:text-white flex items-center gap-2 border border-white/10 px-3 py-1.5 rounded-lg bg-white/5">
                <i class="ph-bold ph-arrow-left"></i> Retour
            </a>
        </div>
    </nav>

    <main class="max-w-4xl mx-auto p-4 lg:p-8">
        
        <div class="text-center mb-10 fade-in">
            <h1 class="font-display text-3xl lg:text-4xl font-bold text-white mb-4">Pr√©parons votre succ√®s</h1>
            <p class="text-slate-400 max-w-xl mx-auto">
                Pour optimiser notre RDV de lancement, merci de compl√©ter ce formulaire. Cela me permettra de cadrer techniquement et graphiquement votre projet.
            </p>
        </div>

        <form action="https://formspree.io/f/mwvbqozd" method="POST" id="projectForm" class="space-y-6 fade-in" style="animation-delay: 0.2s;">

            <div class="glass-card p-6 border-accent-400/30 relative overflow-hidden">
                <div class="absolute top-0 right-0 w-24 h-24 bg-accent-400/10 blur-2xl rounded-full"></div>
                
                <div class="space-y-2 pt-2">
                    <label class="text-xs text-slate-400 uppercase font-bold ml-1">Pack S√©lectionn√©</label>
                    <div class="grid grid-cols-3 gap-2">
                        <div class="relative">
                            <input type="radio" name="project_pack" id="pack-essentiel" value="Essentiel" data-price="900" class="hidden pack-radio-input" onchange="updateCardSelection('Essentiel', 900)">
                            <label for="pack-essentiel" class="pack-radio-label block w-full text-center py-2.5 rounded-lg bg-dark-950 text-slate-400 text-xs sm:text-sm font-medium">Essentiel</label>
                        </div>
                        <div class="relative">
                            <input type="radio" name="project_pack" id="pack-vitrine" value="Vitrine" data-price="1700" class="hidden pack-radio-input" checked onchange="updateCardSelection('Vitrine', 1700)">
                            <label for="pack-vitrine" class="pack-radio-label block w-full text-center py-2.5 rounded-lg bg-dark-950 text-slate-400 text-xs sm:text-sm font-medium">Vitrine</label>
                        </div>
                        <div class="relative">
                            <input type="radio" name="project_pack" id="pack-premium" value="Premium" data-price="2500" class="hidden pack-radio-input" onchange="updateCardSelection('Premium', 2500)">
                            <label for="pack-premium" class="pack-radio-label block w-full text-center py-2.5 rounded-lg bg-dark-950 text-slate-400 text-xs sm:text-sm font-medium">Premium</label>
                        </div>
                    </div>
                </div>
            </div>

            <div id="documents-section" class="glass-card p-6 lg:p-8 hidden border-emerald-500/30 relative overflow-hidden">
                 <div class="absolute top-0 left-0 w-32 h-32 bg-emerald-500/5 blur-2xl rounded-full"></div>
                 
                 <div class="section-title" id="documents-section-title">
                     <i class="ph-duotone ph-files text-emerald-400"></i> <span class="text-emerald-50">Documents & Automatisation</span>
                 </div>
                 
                 <div class="mb-6 p-4 rounded-xl bg-dark-950/50 border border-white/5">
                    <label class="label-premium">Documents s√©lectionn√©s (Rappel)</label>
                    <div id="selected-docs-display" class="flex flex-wrap gap-2 mt-2">
                        </div>
                    <input type="hidden" name="selected_documents_list" id="selectedDocsInput">
                 </div>

                 <div class="space-y-6">
                    <div>
                        <label class="label-premium text-emerald-400">D√©tails pour le document "Autre"</label>
                        <p class="text-xs text-slate-400 mb-2">Si vous avez s√©lectionn√© "Autre", d√©crivez ici le type de document souhait√©.</p>
                        <textarea name="doc_custom_details" id="docCustomDetails" class="textarea-premium border-emerald-500/20 focus:border-emerald-500" rows="2" placeholder="Ex: Je souhaite une attestation de pr√©sence g√©n√©r√©e automatiquement..."></textarea>
                    </div>
                    <div>
                        <label class="label-premium text-emerald-400">Champs sp√©cifiques & Modifications</label>
                        <p class="text-xs text-slate-400 mb-2">Pour les documents standards (Bail, Devis...), listez ici les champs sp√©cifiques ou clauses particuli√®res √† ajouter.</p>
                        <textarea name="doc_modifications" id="docModifications" class="textarea-premium border-emerald-500/20 focus:border-emerald-500" rows="3" placeholder="Ex: Sur le bail, rajouter une clause concernant les animaux. Sur le devis, ajouter une colonne TVA sp√©cifique..."></textarea>
                    </div>
                 </div>
            </div>

            <div class="glass-card p-6 lg:p-8">
                <div class="section-title mt-0"><i class="ph-duotone ph-identification-card"></i> 1. Informations G√©n√©rales</div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="col-span-1 md:col-span-2">
                        <label class="label-premium">Nom de l'entreprise / Projet</label>
                        <input type="text" name="company_name" id="companyName" placeholder="Ex: Menuiserie Dupont" class="input-premium" required>
                    </div>
                    <div>
                        <label class="label-premium">Votre Nom & Pr√©nom</label>
                        <input type="text" name="contact_name" id="contactName" placeholder="Votre nom complet" class="input-premium" required>
                    </div>
                    <div>
                        <label class="label-premium">Site actuel (si existant)</label>
                        <input type="url" name="current_website" id="currentUrl" placeholder="https://..." class="input-premium">
                    </div>
                    <div class="col-span-1 md:col-span-2">
                        <label class="label-premium">Activit√© & Zone G√©ographique</label>
                        <textarea name="activity_description" id="activityDesc" rows="2" placeholder="Que faites-vous et o√π ? (Ex: Plombier √† Lyon et alentours...)" class="textarea-premium" required></textarea>
                    </div>
                    <div class="col-span-1 md:col-span-2">
                        <label class="label-premium">Votre Email (pour le retour)</label>
                        <input type="email" name="email" id="contactEmail" placeholder="votre@email.com" class="input-premium" required>
                    </div>
                </div>
            </div>

            <div class="glass-card p-6 lg:p-8">
                <div class="section-title"><i class="ph-duotone ph-target"></i> 2. Objectifs & Clients</div>
                
                <div class="mb-6">
                    <label class="label-premium mb-3">Pourquoi refaire/cr√©er ce site maintenant ?</label>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-2">
                        <label class="chk-label"><input type="checkbox" name="goals" value="Plus de visibilit√©" class="chk-input"> <span class="text-sm text-slate-300">Gagner en visibilit√©</span></label>
                        <label class="chk-label"><input type="checkbox" name="goals" value="Image trop vieille" class="chk-input"> <span class="text-sm text-slate-300">Moderniser l'image</span></label>
                        <label class="chk-label"><input type="checkbox" name="goals" value="G√©n√©rer des contacts" class="chk-input"> <span class="text-sm text-slate-300">G√©n√©rer des leads/appels</span></label>
                        <label class="chk-label"><input type="checkbox" name="goals" value="Vendre en ligne" class="chk-input"> <span class="text-sm text-slate-300">Vendre des produits</span></label>
                    </div>
                </div>

                <div class="space-y-4">
                    <div>
                        <label class="label-premium">Qui est votre client id√©al ?</label>
                        <input type="text" name="target_audience" id="targetAudience" placeholder="Ex: Particuliers 30-50 ans propri√©taires..." class="input-premium">
                    </div>
                    <div>
                        <label class="label-premium">Quelle action principale attendez-vous du visiteur ?</label>
                        <select name="main_cta" id="mainCta" class="select-premium">
                            <option>M'appeler par t√©l√©phone</option>
                            <option>Remplir un formulaire de devis</option>
                            <option>Prendre RDV en ligne</option>
                            <option>Acheter un produit</option>
                            <option>S'inscrire √† une newsletter</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="glass-card p-6 lg:p-8">
                <div class="section-title"><i class="ph-duotone ph-paint-brush"></i> 3. Design & Contenus</div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                    <div>
                        <label class="label-premium">Avez-vous un logo ?</label>
                        <select name="has_logo" id="hasLogo" class="select-premium">
                            <option>Oui, fichiers vectoriels dispos</option>
                            <option>Oui, mais mauvaise qualit√©</option>
                            <option>Non, √† cr√©er (hors devis)</option>
                            <option>Non, simple texte suffira</option>
                        </select>
                    </div>
                    <div>
                        <label class="label-premium">Ambiance souhait√©e</label>
                        <select name="design_vibe" id="designVibe" class="select-premium">
                            <option>Moderne & Minimaliste</option>
                            <option>Premium & Haut de gamme</option>
                            <option>Chaleureux & Artisanal</option>
                            <option>Dynamique & Color√©</option>
                            <option>Institutionnel & S√©rieux</option>
                        </select>
                    </div>
                </div>

                <div>
                    <label class="label-premium">Disponibilit√© des textes & images</label>
                    <div class="grid grid-cols-1 gap-2">
                        <label class="chk-label bg-white/5 rounded-lg">
                            <input type="radio" name="content_status" value="Tout est pr√™t" class="chk-input">
                            <div class="text-sm">
                                <span class="block text-white font-medium">J'ai d√©j√† tout le contenu</span>
                                <span class="text-slate-400 text-xs">Textes r√©dig√©s et photos s√©lectionn√©es.</span>
                            </div>
                        </label>
                        <label class="chk-label bg-white/5 rounded-lg">
                            <input type="radio" name="content_status" value="En cours de r√©daction" class="chk-input" checked>
                            <div class="text-sm">
                                <span class="block text-white font-medium">C'est en cours</span>
                                <span class="text-slate-400 text-xs">Je pr√©pare √ßa pour le lancement.</span>
                            </div>
                        </label>
                        <label class="chk-label bg-white/5 rounded-lg">
                            <input type="radio" name="content_status" value="Besoin d'aide" class="chk-input">
                            <div class="text-sm">
                                <span class="block text-white font-medium">J'ai besoin d'aide / Je n'ai rien</span>
                                <span class="text-slate-400 text-xs">Nous devrons voir cela ensemble (peut impacter le devis).</span>
                            </div>
                        </label>
                    </div>
                </div>
                
                <div class="mt-4">
                    <label class="label-premium">Sites inspirants (Liens)</label>
                    <input type="text" name="inspiration_links" id="inspirationLinks" placeholder="Collez ici 1 ou 2 liens de sites que vous aimez" class="input-premium">
                </div>
            </div>

            <div class="glass-card p-6 lg:p-8">
                <div class="section-title"><i class="ph-duotone ph-wrench"></i> 4. Technique & Acc√®s</div>

                <div class="mb-6">
                    <label class="label-premium mb-2">Fonctionnalit√©s sp√©cifiques souhait√©es</label>
                    <div class="grid grid-cols-2 gap-2">
                        <label class="chk-label"><input type="checkbox" name="features" value="Blog/Actus" class="chk-input"> <span class="text-sm text-slate-300">Blog / Actualit√©s</span></label>
                        <label class="chk-label"><input type="checkbox" name="features" value="Avis Google" class="chk-input"> <span class="text-sm text-slate-300">Int√©gration Avis Google</span></label>
                        <label class="chk-label"><input type="checkbox" name="features" value="Prise RDV" class="chk-input"> <span class="text-sm text-slate-300">Module Prise de RDV</span></label>
                        <label class="chk-label"><input type="checkbox" name="features" value="Multilingue" class="chk-input"> <span class="text-sm text-slate-300">Site Multilingue</span></label>
                        <label class="chk-label"><input type="checkbox" name="features" value="Newsletter" class="chk-input"> <span class="text-sm text-slate-300">Inscription Newsletter</span></label>
                        <label class="chk-label"><input type="checkbox" name="features" value="Portfolio" class="chk-input"> <span class="text-sm text-slate-300">Galerie / Portfolio</span></label>
                    </div>
                </div>

                <div class="p-4 rounded-xl bg-yellow-500/10 border border-yellow-500/20 mb-4">
                    <div class="flex gap-3">
                        <i class="ph-fill ph-lock-key text-yellow-500 text-xl"></i>
                        <div>
                            <h4 class="text-sm font-bold text-yellow-500 mb-1">S√©curit√© des acc√®s</h4>
                            <p class="text-xs text-yellow-200/80">Ne m'envoyez <strong>jamais</strong> de mots de passe via ce formulaire. Nous utiliserons un canal s√©curis√© ou vous me cr√©erez un acc√®s d√©l√©gu√©.</p>
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="label-premium">Nom de domaine (adresse .fr/.com)</label>
                        <select name="domain_status" id="domainStatus" class="select-premium">
                            <option>Je ne l'ai pas encore achet√©</option>
                            <option>Je l'ai d√©j√† (OVH, Ionos...)</option>
                            <option>Je veux que tu t'en occupes</option>
                        </select>
                    </div>
                    <div>
                        <label class="label-premium">H√©bergeur (si existant)</label>
                        <input type="text" name="host_provider" id="hostProvider" placeholder="Ex: OVH, Hostinger..." class="input-premium">
                    </div>
                </div>
            </div>

            <div class="glass-card p-6 lg:p-8">
                <div class="section-title"><i class="ph-duotone ph-calendar-check"></i> 5. Organisation</div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                    <div>
                        <label class="label-premium">Date de mise en ligne souhait√©e</label>
                        <input type="date" name="deadline" id="deadline" class="input-premium">
                    </div>
                    <div>
                        <label class="label-premium">Budget approximatif (si hors Pack)</label>
                        <input type="text" name="budget" id="budget" placeholder="Si demande sp√©cifique..." class="input-premium">
                    </div>
                </div>
                
                <div>
                    <label class="label-premium text-accent-400">La Question Magique ‚ú®</label>
                    <p class="text-xs text-slate-400 mb-2">Y a-t-il quelque chose d'important que vous voulez absolument voir et que je n'ai pas demand√© ?</p>
                    <textarea name="magic_question" id="magicQuestion" rows="3" class="textarea-premium" placeholder="Ex: Je d√©teste le vert, j'adore les coins arrondis, je veux que ma grand-m√®re puisse lire sans lunettes..."></textarea>
                </div>
            </div>

            <input type="hidden" name="_subject" value="üöÄ Nouveau Brief Projet Web !">
            <input type="hidden" name="_language" value="fr">

            <div class="h-24"></div>

            <div class="sticky-action-bar">
                <button type="submit" class="bg-gradient-to-r from-accent-500 to-blue-600 text-white font-bold py-3 px-8 rounded-xl shadow-lg hover:shadow-accent-500/25 hover:scale-105 transition-all flex items-center gap-2">
                    <span>Envoyer mes r√©ponses</span>
                    <i class="ph-bold ph-paper-plane-right"></i>
                </button>
                <button type="button" onclick="copyContent()" class="bg-white/10 text-slate-300 font-bold py-3 px-4 rounded-xl hover:bg-white/20 transition-all" title="Copier le texte (sauvegarde)">
                    <i class="ph-bold ph-copy"></i>
                </button>
            </div>

        </form>

    </main>

    <div id="toast" class="fixed bottom-24 left-1/2 transform -translate-x-1/2 bg-dark-900 border border-accent-400 text-white px-6 py-3 rounded-xl shadow-2xl flex items-center gap-3 opacity-0 pointer-events-none transition-all duration-300 z-50">
        <i class="ph-fill ph-check-circle text-accent-400 text-xl"></i>
        <span class="font-medium text-sm">Contenu copi√© dans le presse-papier !</span>
    </div>

    <script>
        function updateCardSelection(packName, price) {
            console.log("Pack s√©lectionn√© : " + packName);
        }

        // --- Fonctions utilitaires ---
        function getVal(id) { const el = document.getElementById(id); return el ? el.value : ''; }
        function getChecks(name) { return Array.from(document.querySelectorAll(`input[name="${name}"]:checked`)).map(c => c.value).join(', '); }
        function getRadio(name) { const r = document.querySelector(`input[name="${name}"]:checked`); return r ? r.value : ''; }

        function buildMessage() {
            let pack = getRadio('project_pack') || 'Non d√©fini';
            let body = `PACK: ${pack}\n\n`;
            
            // Ajout des documents dans la copie
            const docsList = getVal('selectedDocsInput');
            if(docsList) {
                body += `DOCUMENTS DEMAND√âS: ${docsList}\n`;
                const customDetails = getVal('docCustomDetails');
                const docMods = getVal('docModifications');
                if(customDetails) body += `DETAIL AUTRE DOC: ${customDetails}\n`;
                if(docMods) body += `MODIFS DOCS: ${docMods}\n`;
                body += `\n`;
            }

            body += `PROJET: ${getVal('companyName')} (${getVal('contactName')})\n`;
            body += `SITE ACTUEL: ${getVal('currentUrl')}\n`;
            body += `ACTIVIT√â: ${getVal('activityDesc')}\n\n`;
            body += `OBJECTIFS: ${getChecks('goals')}\n`;
            body += `CIBLE: ${getVal('targetAudience')}\n`;
            body += `CTA: ${getVal('mainCta')}\n\n`;
            body += `DESIGN: Logo ${getVal('hasLogo')}, Style ${getVal('designVibe')}\n`;
            body += `CONTENU: ${getRadio('content_status')}\n\n`;
            body += `TECH: ${getChecks('features')}\n`;
            body += `DOMAINE: ${getVal('domainStatus')}, H√âBERGEUR: ${getVal('hostProvider')}\n\n`;
            body += `DEADLINE: ${getVal('deadline')}\n`;
            body += `NOTE: ${getVal('magicQuestion')}`;
            return body;
        }

        function copyContent() {
            const content = buildMessage();
            navigator.clipboard.writeText(content).then(() => {
                const toast = document.getElementById('toast');
                toast.innerHTML = '<i class="ph-fill ph-check-circle text-accent-400 text-xl"></i><span class="font-medium text-sm">Contenu copi√© dans le presse-papier !</span>';
                toast.classList.remove('opacity-0', 'pointer-events-none', 'translate-y-4');
                setTimeout(() => toast.classList.add('opacity-0', 'pointer-events-none', 'translate-y-4'), 3000);
            });
        }
        
        // --- GESTION DE L'ENVOI ---
        const form = document.getElementById("projectForm");
        
        async function handleSubmit(event) {
            event.preventDefault();
            const btn = form.querySelector('button[type="submit"]');
            const originalContent = btn.innerHTML;
            
            btn.innerHTML = '<span>Envoi en cours...</span> <i class="ph-bold ph-spinner animate-spin"></i>';
            btn.disabled = true;

            const data = new FormData(event.target);
            
            try {
                const response = await fetch(event.target.action, {
                    method: form.method,
                    body: data,
                    headers: { 'Accept': 'application/json' }
                });
                
                if (response.ok) {
                    const toast = document.getElementById('toast');
                    toast.innerHTML = '<i class="ph-fill ph-check-circle text-accent-400 text-xl"></i><span class="font-medium text-sm">Bien re√ßu ! Je reviens vers vous vite.</span>';
                    toast.classList.remove('opacity-0', 'pointer-events-none', 'translate-y-4');
                    setTimeout(() => toast.classList.add('opacity-0', 'pointer-events-none', 'translate-y-4'), 5000);
                    form.reset();
                } else {
                    const data = await response.json();
                    if (Object.hasOwn(data, 'errors')) {
                        alert("Erreur: " + data["errors"].map(error => error["message"]).join(", "));
                    } else {
                        alert("Oups ! Une erreur est survenue lors de l'envoi.");
                    }
                }
            } catch (error) {
                alert("Erreur r√©seau. Veuillez r√©essayer.");
            } finally {
                btn.innerHTML = originalContent;
                btn.disabled = false;
            }
        }
        
        form.addEventListener("submit", handleSubmit);
    </script>
    
    <script>
    // --- GESTION DES PARAMETRES URL (AUTO-REMPLISSAGE) ---
    document.addEventListener('DOMContentLoaded', () => {
        const params = new URLSearchParams(window.location.search);
        
        // 1. Remplissage Nom et Email
        if(params.has('name')) {
            const el = document.getElementById('contactName');
            if(el) el.value = params.get('name');
        }
        if(params.has('email')) {
            const el = document.getElementById('contactEmail');
            if(el) el.value = params.get('email');
        }
        
        // 2. S√©lection du Pack
        if(params.has('pack')) {
            const packValue = params.get('pack');
            const radio = document.querySelector(`input[name="project_pack"][value="${packValue}"]`);
            if (radio) radio.checked = true;
        }

        // 3. Gestion des Documents s√©lectionn√©s (Nouveau)
        // On suppose que l'URL ressemble √† ?documents=Devis,Facture,Autre : Test
        if(params.has('documents')) {
            const docsStr = params.get('documents');
            if(docsStr && docsStr.trim() !== '') {
                // Afficher la section cach√©e
                const section = document.getElementById('documents-section');
                section.classList.remove('hidden');
                
                // Remplir le champ cach√© pour Formspree
                document.getElementById('selectedDocsInput').value = docsStr;

                // Afficher les tags visuels
                const docsArr = docsStr.split(',');
                const container = document.getElementById('selected-docs-display');
                
                docsArr.forEach(doc => {
                    if(doc.trim()) {
                        const tag = document.createElement('span');
                        tag.className = 'px-3 py-1 rounded-full bg-emerald-500/10 text-emerald-400 text-xs font-bold border border-emerald-500/20';
                        tag.textContent = doc.trim();
                        container.appendChild(tag);
                    }
                });
            }
        }
    });
    </script>
</body>
</html>